(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/API/voice/voice"],{342:function(e,n,t){"use strict";(function(e){t(5);r(t(3));var n=r(t(343));function r(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=t,e(n.default)}).call(this,t(1)["createPage"])},343:function(e,n,t){"use strict";t.r(n);var r=t(344),o=t(346);for(var i in o)"default"!==i&&function(e){t.d(n,e,(function(){return o[e]}))}(i);t(349);var c,a=t(15),u=Object(a["default"])(o["default"],r["render"],r["staticRenderFns"],!1,null,null,null,!1,r["components"],c);u.options.__file="pages/API/voice/voice.vue",n["default"]=u.exports},344:function(e,n,t){"use strict";t.r(n);var r=t(345);t.d(n,"render",(function(){return r["render"]})),t.d(n,"staticRenderFns",(function(){return r["staticRenderFns"]})),t.d(n,"recyclableRender",(function(){return r["recyclableRender"]})),t.d(n,"components",(function(){return r["components"]}))},345:function(e,n,t){"use strict";var r;t.r(n),t.d(n,"render",(function(){return o})),t.d(n,"staticRenderFns",(function(){return c})),t.d(n,"recyclableRender",(function(){return i})),t.d(n,"components",(function(){return r}));try{r={pageHead:function(){return t.e("components/page-head/page-head").then(t.bind(null,1039))}}}catch(a){if(-1===a.message.indexOf("Cannot find module")||-1===a.message.indexOf(".vue"))throw a;console.error(a.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var o=function(){var e=this,n=e.$createElement;e._self._c},i=!1,c=[];o._withStripped=!0},346:function(e,n,t){"use strict";t.r(n);var r=t(347),o=t.n(r);for(var i in r)"default"!==i&&function(e){t.d(n,e,(function(){return r[e]}))}(i);n["default"]=o.a},347:function(e,n,t){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=a(t(17)),o=c(t(348));function i(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function c(e){if(e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var n=i();if(n&&n.has(e))return n.get(e);var t={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var c=r?Object.getOwnPropertyDescriptor(e,o):null;c&&(c.get||c.set)?Object.defineProperty(t,o,c):t[o]=e[o]}return t.default=e,n&&n.set(e,t),t}function a(e){return e&&e.__esModule?e:{default:e}}function u(e,n,t,r,o,i,c){try{var a=e[i](c),u=a.value}catch(l){return void t(l)}a.done?n(u):Promise.resolve(u).then(r,o)}function l(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var i=e.apply(n,t);function c(e){u(i,r,o,c,a,"next",e)}function a(e){u(i,r,o,c,a,"throw",e)}c(void 0)}))}}var s=null,f=null,d=null,p=null,m={data:function(){return{title:"start/stopRecord、play/stopVoice",recording:!1,playing:!1,hasRecord:!1,tempFilePath:"",recordTime:0,playTime:0,formatedRecordTime:"00:00:00",formatedPlayTime:"00:00:00"}},onUnload:function(){this.end()},onLoad:function(){var n=this;p=e.createInnerAudioContext(),p.onEnded((function(){clearInterval(s);var e=0;console.log("play voice finished"),n.playing=!1,n.formatedPlayTime=o.formatTime(e),n.playTime=e})),d=e.getRecorderManager(),d.onStart((function(){console.log("recorder start"),n.recording=!0,f=setInterval((function(){n.recordTime+=1,n.formatedRecordTime=o.formatTime(n.recordTime)}),1e3)})),d.onStop((function(e){console.log("on stop"),p.src=e.tempFilePath,n.hasRecord=!0,n.recording=!1})),d.onError((function(){console.log("recorder onError")}))},methods:{startRecord:function(){return l(r.default.mark((function e(){return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:d.start({format:"mp3"});case 1:case"end":return e.stop()}}),e)})))()},stopRecord:function(){d.stop(),clearInterval(f)},playVoice:function(){var e=this;console.log("play voice"),this.playing=!0,s=setInterval((function(){e.playTime+=1,e.formatedPlayTime=o.formatTime(e.playTime)}),1e3),p.play()},stopVoice:function(){clearInterval(s),this.playing=!1,this.formatedPlayTime=o.formatTime(0),this.playTime=0,p.stop()},end:function(){p.stop(),d.stop(),clearInterval(f),clearInterval(s),this.recording=!1,this.playing=!1,this.hasRecord=!1,this.playTime=0,this.recordTime=0,this.formatedRecordTime="00:00:00",this.formatedRecordTime="00:00:00"},clear:function(){this.end()}}};n.default=m}).call(this,t(1)["default"])},349:function(e,n,t){"use strict";t.r(n);var r=t(350),o=t.n(r);for(var i in r)"default"!==i&&function(e){t.d(n,e,(function(){return r[e]}))}(i);n["default"]=o.a},350:function(e,n,t){}},[[342,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../../.sourcemap/mp-weixin/pages/API/voice/voice.js.map